{
	"nodes":[
		{"id":"933716d538ecf49a","x":847,"y":-631,"width":2053,"height":631,"color":"3","type":"group","label":"Visual Frontend"},
		{"id":"45521583dd7b9936","x":929,"y":294,"width":1138,"height":439,"color":"4","type":"group","label":"IMU Preintegration"},
		{"id":"67eb4a08deedd196","type":"text","text":"#### [[🧩Basalt Code Analysis#getVioEstimator|VioEstimatorFactory::getVioEstimator]]\n","x":-320,"y":-340,"width":271,"height":73},
		{"id":"0a384a653ff50e98","type":"text","text":"#### [[🍯 shared_ptr 축약어 꿀팁]]","x":277,"y":-803,"width":363,"height":63},
		{"id":"969322d6d043be67","type":"text","text":"#### [[🧩Basalt Code Analysis#getOpticalFlow|OpticalFlowFactory::getOpticalFlow]]\n","x":-414,"y":-600,"width":460,"height":71},
		{"id":"828a87d5f1f1a1c0","type":"text","text":"#### [[🧩Basalt Code Analysis#OpticalFlowBase#PatchOpticalFlow|OpticalFlowBase::PatchOpticalFlow]]\n","x":169,"y":-591,"width":431,"height":54},
		{"id":"5b622ed35ecac096","type":"text","text":"#### 🧵[[🧩Basalt Code Analysis#ProcessingLoop|PatchOpticalFlow::processingLoop]]\n","x":867,"y":-601,"width":445,"height":75},
		{"id":"0ce93bc801f115e3","type":"text","text":"#### [[🧩Basalt Code Analysis#PatchOpticalFlow#processFrame|PatchOpticalFlow::processFrame]](input_ptr→t_ns, input_ptr)","x":1484,"y":-591,"width":676,"height":54},
		{"id":"f459ed9a2db8e8bf","type":"text","text":"#### [[🧩Basalt Code Analysis#PatchOpticalFlow#trackPoints|PatchOpticalFlow::trackPoints]](old_pyramid, pyramid, transforms, new_transforms)","x":2367,"y":-611,"width":513,"height":95},
		{"id":"ab5031bf4cec18d4","type":"text","text":"#### [[🧩Basalt Code Analysis#PatchOpticalFlow#addPoints|PatchOpticalFlow::addPoints]]()","x":2434,"y":-360,"width":380,"height":64},
		{"id":"4fd8ba6f7744f68b","type":"text","text":"#### [[🧩Basalt Code Analysis#PatchOpticalFlow::filterPoints|PatchOpticalFlow::filterPoints]]()\nfeature는 최종적으로 `transforms->observations`에 저장이 됨.\n`output_queue`에는 `transforms`가 들어감.","x":2421,"y":-184,"width":406,"height":164},
		{"id":"9a3580f59a0b8a48","type":"text","text":"#### [[🧩Basalt Code Analysis#feed_images|feed_images]]\n","x":2011,"y":-1222,"width":250,"height":60},
		{"id":"dd1bffee9ea13bbd","type":"text","text":"#### [[🧩Basalt Code Analysis#feed_images|feed_imu]]\n","x":2341,"y":-1222,"width":250,"height":60},
		{"id":"d118c46fb26dd867","type":"text","text":"#### thread3 Visualization","x":2689,"y":-1222,"width":250,"height":60},
		{"id":"5b842237c8ae2529","type":"text","text":"#### thread4 out_state_queue.pop","x":2991,"y":-1222,"width":280,"height":60},
		{"id":"16bbb2ca460e8c53","type":"text","text":"#### thread5 [[🧩Basalt Code Analysis#print_queue_fn|print_queue_fn]]","x":3351,"y":-1222,"width":260,"height":60},
		{"id":"f16d5211d1059731","type":"text","text":"#### [[🧩Basalt Code Analysis#OpticalFlowBase#input_queue|OpticalFlowBase::inpute_queue]]\n","x":1932,"y":-1035,"width":409,"height":83},
		{"id":"cb411d32be060607","type":"text","text":"#### Calib Config file 의미들\n##### Bias \nAccel은 9개의 값, Gyro는 12개의 값을 넣으라고 되어있다.\nAccel : 처음 3개가 bias, 나머지가 scale factor.\nGyro : 처음 3개가 bias, 나머지 9개가 각각 scale factor","x":781,"y":-1600,"width":487,"height":202},
		{"id":"6c2426522eed89d9","type":"text","text":"### 🧵Thread\n- ##### [[🧩Basalt Code Analysis#ProcessingLoop|PatchOpticalFlow::processingLoop]]\n- ##### [[🧩Basalt Code Analysis#SqrtKeypointVioEstimator#initialize|SqrtKeypointVioEstimator::initialize]]\n\n","x":1923,"y":-1600,"width":475,"height":166},
		{"id":"4ea9359b895f954d","type":"text","text":"### Common_types.h\n\n- #### [[🧩Basalt Code Analysis#TimeCamId|TimeCmaId]]\n- #### [[🧩Basalt Code Analysis#Landmark|Landmark]]\n- ","x":3160,"y":200,"width":371,"height":216},
		{"id":"663c83fe58c6bcb1","type":"text","text":"#### [[🧩Basalt Code Analysis#IntegratedImuMeasurement#predictState|IntegratedImuMeasurement::predictState]]  (`frame_states.at(last_state_t_ns).getState(), g, next_state`)\nlast_state_t_ns 기준으로 preintegration 값을 이용해서 pose값을 구함.","x":1484,"y":1048,"width":508,"height":160},
		{"id":"392a55c07bebaeb4","type":"text","text":"#### for loop : curr_frame의 observations ","x":1488,"y":1328,"width":500,"height":60},
		{"id":"9219d73ac0b0235c","type":"text","text":"#### [[🧩Basalt Code Analysis#IntegratedImuMeasurement#propagateState|propagateState]] (delta_ state_ , data_corrected, new_state, &F, &A, &G)","x":1598,"y":543,"width":449,"height":170},
		{"id":"df468926ed1bfe27","type":"text","text":"#### [[🧩Basalt Code Analysis#IntegratedImuMeasurement#Integrate|IntegratedImuMeasurement::Integrate]](* data, accel_cov, gyro_cov)\n로, imu preintegration 근데  midPoint가 아니라 그냥 Euler 방식.","x":949,"y":554,"width":460,"height":149},
		{"id":"ef822a6bde45574d","type":"text","text":"#### [[🧩Basalt Code Analysis#IntegratedImuMeasurement|IntegratedImuMeasurement]] 객체로 `meas`(prev_frame→t_ns, last_state의 gyro, accel bias) 생성","x":999,"y":314,"width":359,"height":183},
		{"id":"a60e1b6e647d667d","type":"text","text":"#### [[🧩Basalt Code Analysis#measure|measure]] (curr_frame, meas)","x":1044,"y":1078,"width":269,"height":99},
		{"id":"ab9752ade6e6c920","type":"text","text":"#### [[🧩Basalt Code Analysis#SqrtKeypointVioEstimator#initialize|SqrtKeypointVioEstimator::initialize]] (bg, ba)","x":221,"y":596,"width":518,"height":64},
		{"id":"88c51c7e2f964193","type":"text","text":"\n#### [[🧩Basalt Code Analysis#initialize|🧵 SqrtKeyPointVioEsimator::initialize]]\n\n`opt_flow_ptr->output_queue = &vio->vision_data_queue`\n\n`vio→output_state_queue = &out_state_queue` ","x":-420,"y":548,"width":473,"height":160},
		{"id":"9f869b4b7c7bec2d","type":"text","text":"[[🧩Basalt Code Analysis#Triangulation 이후|Triangulation 이후]]\n현재 시점에서 발견 안 된 landmark 삭제하기.\n#### [[🧩Basalt Code Analysis#optimize_and_marg|optimize_and_marg]](`num_points_connected, lost_landmarks`)\nvisualize를 위해 결괏값들을 담아주는 작업","x":2730,"y":2108,"width":520,"height":220},
		{"id":"2aae5134bc099e64","type":"text","text":"#### [[🧩Basalt Code Analysis#LandmarkDatabase#addObservation|LandmarkDatabse::addObservation]](tcid_target, kobs)\n로 LandmarkDatabase 안에 있는 변수 `kpts, observation` 업데이트.\n `kpts` : keypoint 당 host_keyframe 및 observations 모음\n `observations` : host_TimeCamid, 발견된 시점의 TimeCamId, feature id","x":2740,"y":1228,"width":500,"height":261},
		{"id":"40ec47e6c0d0f365","type":"text","text":"#### lmdb에 있는 feature보다 새 feature가 더 많다면 → keyframe으로 간주.\n\n#### [[🧩Basalt Code Analysis#measure#Triangulate 진행|Triangulation 진행]]\n근데 depth가 0, 3.0 사이로 계산된 것만 landmark로 보고, 이 feature의 과거 좌표들을 `lmdb`에 담아준다. ([[🧩Basalt Code Analysis#addObservation|LandmarkDatabase::addObservation]])","x":2740,"y":1688,"width":500,"height":260},
		{"id":"fa0ae121070408af","x":3451,"y":2588,"width":442,"height":163,"type":"text","text":"#### [[🧩Basalt Code Analysis#marginalize|marginalize]](num_points_connected, lost_landmarks)"},
		{"id":"7ec327c4d3513c30","type":"text","text":"#### 해당 observation이 lmdb에 있다면\n","x":2160,"y":1328,"width":400,"height":60},
		{"id":"5942c5bca9d7ebc6","type":"text","text":"#### [[🧩Basalt Code Analysis#basalt#factory_helper|VioEsimatorBase::factory_helper]]\n\n\nSqrtKeypointVioEstimator를 return","x":140,"y":-352,"width":401,"height":98},
		{"id":"5542e803c0c3a72f","type":"text","text":"#### [[🧩Basalt Code Analysis#optimize|optimize]] ()\n","x":3542,"y":2142,"width":260,"height":152},
		{"id":"eaa58a0e693001fd","x":4036,"y":1981,"width":304,"height":99,"type":"text","text":"`frame_states` :  일반 frame\n`frame_poses` : keyframe\n 맞나?"}
	],
	"edges":[
		{"id":"bc70900eb7eac5c0","fromNode":"67eb4a08deedd196","fromSide":"right","toNode":"5942c5bca9d7ebc6","toSide":"left"},
		{"id":"f1de5c8e41364e1c","fromNode":"67eb4a08deedd196","fromSide":"bottom","toNode":"88c51c7e2f964193","toSide":"top"},
		{"id":"ef24b91f0e3a8418","fromNode":"969322d6d043be67","fromSide":"bottom","toNode":"67eb4a08deedd196","toSide":"top"},
		{"id":"f5ccec3bdf0e1455","fromNode":"969322d6d043be67","fromSide":"right","toNode":"828a87d5f1f1a1c0","toSide":"left"},
		{"id":"e99c317aea2e5a30","fromNode":"88c51c7e2f964193","fromSide":"right","toNode":"ab9752ade6e6c920","toSide":"left"},
		{"id":"41644c601480c340","fromNode":"9a3580f59a0b8a48","fromSide":"bottom","toNode":"f16d5211d1059731","toSide":"top"},
		{"id":"febb20f9ce7a0cf6","fromNode":"828a87d5f1f1a1c0","fromSide":"right","toNode":"5b622ed35ecac096","toSide":"left"},
		{"id":"4939b6bd5fc6e114","fromNode":"5b622ed35ecac096","fromSide":"right","toNode":"0ce93bc801f115e3","toSide":"left"},
		{"id":"64f1d5b91b8d9b96","fromNode":"0ce93bc801f115e3","fromSide":"right","toNode":"f459ed9a2db8e8bf","toSide":"left"},
		{"id":"fb7359d28aff5e4a","fromNode":"f459ed9a2db8e8bf","fromSide":"bottom","toNode":"ab5031bf4cec18d4","toSide":"top"},
		{"id":"cc0546209db3a815","fromNode":"ab5031bf4cec18d4","fromSide":"bottom","toNode":"4fd8ba6f7744f68b","toSide":"top"},
		{"id":"f78d2a22e3033abf","fromNode":"ab9752ade6e6c920","fromSide":"right","toNode":"df468926ed1bfe27","toSide":"left"},
		{"id":"f43430448d947791","fromNode":"df468926ed1bfe27","fromSide":"bottom","toNode":"a60e1b6e647d667d","toSide":"top"},
		{"id":"87b1b4d3c17f11bc","fromNode":"ef822a6bde45574d","fromSide":"bottom","toNode":"df468926ed1bfe27","toSide":"top"},
		{"id":"7db47aea5c5139ef","fromNode":"df468926ed1bfe27","fromSide":"right","toNode":"9219d73ac0b0235c","toSide":"left"},
		{"id":"d1b9a19c4775be6c","fromNode":"a60e1b6e647d667d","fromSide":"right","toNode":"663c83fe58c6bcb1","toSide":"left"},
		{"id":"82399d0ff1bb41ff","fromNode":"663c83fe58c6bcb1","fromSide":"bottom","toNode":"392a55c07bebaeb4","toSide":"top"},
		{"id":"36d51d1223450a20","fromNode":"392a55c07bebaeb4","fromSide":"right","toNode":"7ec327c4d3513c30","toSide":"left"},
		{"id":"b5ab38b4a8450f00","fromNode":"7ec327c4d3513c30","fromSide":"right","toNode":"2aae5134bc099e64","toSide":"left"},
		{"id":"15de6187760d45c0","fromNode":"2aae5134bc099e64","fromSide":"bottom","toNode":"40ec47e6c0d0f365","toSide":"top"},
		{"id":"e73a452107d556ee","fromNode":"40ec47e6c0d0f365","fromSide":"bottom","toNode":"9f869b4b7c7bec2d","toSide":"top"},
		{"id":"09488fbb431b4a7c","fromNode":"9f869b4b7c7bec2d","fromSide":"right","toNode":"5542e803c0c3a72f","toSide":"left"},
		{"id":"ff0c77e1a171851c","fromNode":"5542e803c0c3a72f","fromSide":"bottom","toNode":"fa0ae121070408af","toSide":"top"}
	]
}